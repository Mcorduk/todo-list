(()=>{"use strict";const t=(t,e,...o)=>{const n=document.createElement(t);for(const t in e)n.setAttribute(t,e[t]);return o.forEach((t=>{if("string"==typeof t){const e=document.createTextNode(t);n.append(e)}else n.append(t)})),n},e=t=>{let e=[];const o=t;return{getName:()=>o,getTodos:()=>[...e],addTodo:t=>{e.push(t)},removeTodo:t=>{e.splice(t,1)},replaceTodo:(t,o)=>{e[t]=o},todoArray:e}},o=()=>{let t=[];return{projectArray:t,addProject:e=>{t.push(e)},getLastIndex:function(){return t.length-1},removeProject:e=>{t.splice(e,1),console.log(`Project ${e}: Was removed`)}}};o();const n=o();function c(){null==localStorage.getItem("projectsData")&&localStorage.setItem("projectsData","[]");let t=JSON.parse(localStorage.getItem("projectsData"));n.projectArray.forEach(((e,o)=>{t[o]=e})),localStorage.setItem("projectsData",JSON.stringify(t)),console.log(t),console.log(JSON.stringify(t)),console.log("Projects saved.")}const r=(t,e,o,n)=>{const c=t,r=e,d=new Date(o),a=n;let s=!1;return{getTitle:()=>c,getDescription:()=>r,getDueDate:()=>`${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()}`,getPriority:()=>a,getChecked:()=>s,toggleCheck:()=>{const t=!s;return s=t,t}}},d=document.getElementById("addTodoDialog"),a=document.querySelector("form");function s(){const t=document.querySelector(".project-div");if(t){const e=t.getAttribute("data-project-index");if(e)return console.log(`Form submitted: the project form submitted in is ${e}`),parseInt(e,10)}return console.log("Returning project index to add todo failed."),null}function i(t){if(t.preventDefault(),g()){const e=t.target,o=new FormData(e),c={};o.forEach(((t,e)=>{c[e]=t}));const a=r(c.title,c.description,c.dueDate,c.priority);let i=s();n.projectArray[i].addTodo(a),f(i),e.reset(),d.close()}}function l(t){if(t.preventDefault(),g()){const e=t.target,o=new FormData(e),c={};o.forEach(((t,e)=>{c[e]=t}));const a=r(c.title,c.description,c.dueDate,c.priority);let i=s(),l=e.dataset.todoIndex;n.projectArray[i].replaceTodo(l,a),f(i),e.reset(),d.close(),e.classList.contains("edit")&&e.classList.remove("edit")}}function u(){const t=document.getElementById("titleValidationMessage"),e=document.getElementById("dateValidationMessage");t.textContent="",e.textContent=""}function g(){const t=document.getElementById("title"),e=document.getElementById("dueDate");if(u(),!t.value.trim())return titleValidationMessage.textContent="Todo Title cannot be empty.",!1;if(!e.value.trim())return dateValidationMessage.textContent="Due Date cannot be empty.",!1;{const t=new Date;if(new Date(e.value)<t)return dateValidationMessage.textContent="Due Date must be in the future.",!1}return!0}function m(e,o){return t("button",{class:`${e}`},t("img",{src:`${o}`},""))}function p(e){return t("div",{class:`card ${e.getPriority().toLowerCase()}`},t("h2",{},`${e.getTitle()}`,m("checkTodoButton","./img/todoCheck.svg"),m("editTodoButton","./img/todoEdit.svg"),m("deleteTodoButton","./img/todoDelete.svg")),t("p",{},"Due: ",t("span",{},`${e.getDueDate()}`)))}function f(e){const o=document.querySelector(".project-div");o.dataset.projectIndex=`${e}`,o.innerHTML="";const r=n.projectArray[e].getTodos();let d=0;for(const t of r){let e=p(t);e.dataset.todoIndex=d,o.append(e),t.getChecked()&&e.classList.add("checked"),d++}c(),o.append(t("div",{class:"addTodoButton"},t("p",{},t("button",{id:"showDialog"},t("img",{src:"./img/addTodo.svg",alt:"image for a button to add more todos."})))))}var y;a.addEventListener("submit",i),document.querySelector(".project-div").addEventListener("click",(function(t){t.target.closest(".addTodoButton")&&(d.showModal(),a.removeEventListener("submit",l),a.addEventListener("submit",i))})),document.querySelector(".project-div").addEventListener("click",(function(t){const e=t.target.closest(".editTodoButton"),o=t.target.closest(".card");if(e&&o){const t=o.dataset.todoIndex;a.classList.add("edit"),a.dataset.todoIndex=t,d.showModal(),a.removeEventListener("submit",i),a.addEventListener("submit",l)}})),function(){const t=document.getElementById("cancelButton");t&&t.addEventListener("click",(function(){d&&(d.close(),u(),a.reset(),a.classList.contains("edit")&&a.classList.remove("edit"))}))}(),document.querySelector(".project-div").addEventListener("click",(function(t){if(t.target.closest(".checkTodoButton")){const e=t.target.closest(".card");e.classList.toggle("checked");let o=s();n.projectArray[o].todoArray[e.dataset.todoIndex].toggleCheck()}})),function(){const t=document.querySelector(".project-div");t.addEventListener("click",(function(e){const o=t.dataset.projectIndex,c=n.projectArray[o];if(e.target.closest(".deleteTodoButton")){const t=e.target.closest(".card");let n=t.dataset.todoIndex;t.remove(),c.removeTodo(n),f(o)}}))}(),y=function(t){f(t)},document.querySelector("#projectList").addEventListener("click",(function(t){if("article"===t.target.tagName.toLowerCase()){const e=t.target.closest("article").dataset.projectIndex;console.log(e),y(e)}}));const j=()=>t("button",{class:"projectDelete",type:"button"},t("img",{src:"./img/project-delete.svg",alt:"project delete button image"},"")),v=()=>{const t=document.getElementById("projectList");t.innerHTML="";const e=n.projectArray;let o=0;for(const n of e){const e=document.createElement("article");e.innerText=n.getName(),e.dataset.projectIndex=o,e.append(j()),t.append(e),console.log(`Aside Project ${o} was rendered.`),o++}};(()=>{const t=document.getElementById("projectList");function o(){const o=document.getElementById("projectTitle"),r=o.value.trim();if(""!==r){const d=e(r);n.addProject(d);const a=document.createElement("article");a.innerText=r,a.dataset.projectIndex=n.getLastIndex(),a.append(j()),t.append(a),o.value="",c()}1===n.projectArray.length&&f[0]}document.getElementById("projectAdd").addEventListener("click",o),o(),t.addEventListener("click",(function(t){if(t.target.closest(".projectDelete")){const e=t.target.closest("article");let o=e.dataset.projectIndex;e.remove(),n.removeProject(o);const r=document.querySelector(".project-div").getAttribute("data-project-index");c(),v(),r===o&&f(n.getLastIndex())}}))})(),function(){const t=e("Sprint 1");n.addProject(t);const o=e("Sprint 2");n.addProject(o);const c=r("Oyun yapıldı.","Something","2024-04-04","normal");c.toggleCheck();const d=r("Ilk 7'ye girildi.","Something","2024-04-05","important");d.toggleCheck();const a=r("San Francisco'ya gidildi.","Something","2024-04-06","urgent");n.projectArray[0].addTodo(c),n.projectArray[0].addTodo(d),n.projectArray[0].addTodo(a)}(),console.log(n.projectArray[0].getTodos()),f(0),v(),document.getElementById("theme-toggle").addEventListener("click",(function(){document.body.classList.toggle("dark-theme"),document.querySelector(".addTodoButton").classList.toggle("addTodoButtonDark");const t=document.querySelector("dialog");t&&t.classList.toggle("dark");const e=document.body.classList.contains("dark-theme")?"dark":"light";localStorage.setItem("theme",e)})),"dark"===localStorage.getItem("theme")&&document.body.classList.add("dark-theme")})();